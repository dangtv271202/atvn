# 2.4.7.b017

[![Arrive](https://raw.githubusercontent.com/dangtv271202/atvn/master/ArriveTechLogoBlue.png)](https://www.arrivetechnologies.com)

# version

* 10G WCAS
```
AT SDK >show driver
SDK Built On    : Mon 20 Apr 2020 11:11:38 AM +07
                : chitt@linuxsws012
Source REV      : On gitcommit=heads/product/anna_for_autotest_team-0-gfced9a7d64d92683afd9d3158b8e2d10158fe387
Driver Version  : 2.4.7.b017 (active) (Include sdk 2.2.16)
Hardware Version:
+------+------------+---------------------------------+----------+-------------+
|      |            |                                 |          |             |
|Device|Product code|Version                          |HAL       |Role         |
|      |            |                                 |          |             |
+------+------------+---------------------------------+----------+-------------+
|1(*)  |0x60291022  |2.2 (on 2020/01/11), built: 82.45|0x48032000|active (auto)|
+------+------------+---------------------------------+----------+-------------+
```
* 20G MRO
```
<6> Info Init TCL Interpreter DONE
AT SDK >show driver
SDK Built On    : Mon 20 Apr 2020 11:11:38 AM +07
                : chitt@linuxsws012
Source REV      : On gitcommit=heads/product/anna_for_autotest_team-0-gfced9a7d64d92683afd9d3158b8e2d10158fe387
Driver Version  : 2.4.7.b017 (active) (Include sdk 2.2.16)
Hardware Version:
+------+------------+---------------------------------+----------+------+
|      |            |                                 |          |      |
|Device|Product code|Version                          |HAL       |Role  |
|      |            |                                 |          |      |
+------+------------+---------------------------------+----------+------+
|1(*)  |0x60290022  |8.0 (on 2020/01/11), built: 80.45|0x48032000|active|
+------+------------+---------------------------------+----------+------+
AT SDK >
```

# Common

* Update DS3/E3 so that DS3 AIS alarm affecting is enabled as default.

```
AT SDK >show pdh de3 alarm affect 25.1.1
+----------+---+---+---+---+----+
|          |   |   |   |   |    |
|DE3 ID    |LOS|AIS|LOF|RAI|IDLE|
|          |   |   |   |   |    |
+----------+---+---+---+---+----+
|de3.25.1.1|en |en |en |dis|dis |
+----------+---+---+---+---+----+
```
**<span style="color:GREEN">As EXPECTED**


# MRO20/MRO10 CAS/ 40G PASSTHR

* Faceplate ETH ports have hardware-fixed minPacketSize at 64.
```
AT SDK >show eth port 2-10
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|                         |                 |                 |                 |                 |                 |                 |                 |                 |                 |
|Port Id                  |2                |3                |4                |5                |6                |7                |8                |9                |10               |
|                         |                 |                 |                 |                 |                 |                 |                 |                 |                 |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Description              |eth_faceplate.1  |eth_faceplate.2  |eth_faceplate.3  |eth_faceplate.4  |eth_faceplate.5  |eth_faceplate.6  |eth_faceplate.7  |eth_faceplate.8  |eth_faceplate.9  |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Speed                    |1000m            |1000m            |1000m            |1000m            |1000m            |1000m            |1000m            |1000m            |1000m            |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Auto-Neg                 |en               |en               |en               |en               |en               |en               |en               |en               |en               |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Pause Frame Interval Time|0                |0                |0                |0                |0                |0                |0                |0                |0                |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Pause Frame Expire Time  |0                |0                |0                |0                |0                |0                |0                |0                |0                |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Tx IPG                   |10               |10               |10               |10               |10               |10               |10               |10               |10               |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Rx IPG                   |10               |10               |10               |10               |10               |10               |10               |10               |10               |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Flow Control             |en               |en               |en               |en               |en               |en               |en               |en               |en               |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Working                  |full-duplex      |full-duplex      |full-duplex      |full-duplex      |full-duplex      |full-duplex      |full-duplex      |full-duplex      |full-duplex      |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Interface                |1000basex        |1000basex        |1000basex        |1000basex        |1000basex        |1000basex        |1000basex        |1000basex        |1000basex        |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Mac Check                |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Led State                |off              |off              |off              |off              |off              |off              |off              |off              |off              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Source MAC               |01.01.01.01.01.02|01.01.01.01.01.03|01.01.01.01.01.04|01.01.01.01.01.05|01.01.01.01.01.06|01.01.01.01.01.07|01.01.01.01.01.08|01.01.01.01.01.09|01.01.01.01.01.10|
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Dest MAC                 |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|IPv4                     |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|IPv6                     |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Loopback                 |release          |release          |release          |release          |release          |release          |release          |release          |release          |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|MinPacketSize            |64               |64               |64               |64               |64               |64               |64               |64               |64               |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|MaxPacketSize            |16000            |16000            |16000            |16000            |16000            |16000            |16000            |16000            |16000            |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|HiGig                    |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|In-used Bandwidth        |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Running Bandwidth        |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |0 Kbps           |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Enabled                  |en               |en               |en               |en               |en               |en               |en               |en               |en               |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|Link                     |down             |down             |down             |down             |down             |down             |down             |down             |down             |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|DisparityForced          |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|FEC                      |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|K30.7Forced              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |dis              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
|LinkTraining             |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |N/S              |
+-------------------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+
```

The field ```MinPacketSize``` is 64 ===> **<span style="color:GREEN">As EXPECTED**

* Return cAtErrorNotApplicable if Faceplate ETH port maxPacketSize is set to value less than 64.
```  
  AT SDK >eth port maxpacketsize 2 64
  ERROR: Cannot limit packet size on port 2, ret = cAtErrorNotApplicable
  ERROR: Processing command "eth port maxpacketsize 2 64" is failed !
  AT SDK >eth port maxpacketsize 2 65
  AT SDK >eth port maxpacketsize 2 63
  ERROR: Cannot limit packet size on port 2, ret = cAtErrorNotApplicable
  ERROR: Processing command "eth port maxpacketsize 2 63" is failed !
```
It seems Ok with value less than 64, <span style="color:red">but not correct with length =64<span>

* Default minPacketSize at 64 for Backplane 40G ETH ports.
```
AT SDK >show eth port 22,23
+-------------------------+----------------------+----------------------+
|                         |                      |                      |
|Port Id                  |22                    |23                    |
|                         |                      |                      |
+-------------------------+----------------------+----------------------+
|Description              |backplane_serdes.1.mac|backplane_serdes.2.mac|
+-------------------------+----------------------+----------------------+
|Speed                    |40g                   |40g                   |
+-------------------------+----------------------+----------------------+
...
+-------------------------+----------------------+----------------------+
|MinPacketSize            |64                    |64                    |
+-------------------------+----------------------+----------------------+
|MaxPacketSize            |16004                 |16004                 |
+-------------------------+----------------------+----------------------+
```
The field ```MinPacketSize``` is 64 ===> **<span style="color:GREEN">As EXPECTED**

* Enable AN Remote fault generation for Faceplate ETH port 1000baseX
  - **<span style="color:GREEN">It's working fine on 10G wCAS/MRO 20G**
```
AT SDK >rd 0x30823 pretty
Bit# 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
     0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  1  1  1  1  1  1 1 1 1 1 1 1 1 1 1
```
